This is a hacked up version of inline.  It is known to have bugs....
USE AT YOUR OWN RISK!  It attempts to eliminate redundant register moves...
